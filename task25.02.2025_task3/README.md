# 25 02 2025  Задание 3.
### **Алгоритм обхода шахматной доски конём (рекурсия + backtracking)**

**Задача:**  
Конь должен пройти по всем клеткам доски 6×6, побывав на каждой **ровно один раз**.  
(Это классическая задача о **гамильтоновом пути** для шахматного коня.)

---

## **1. Основные идеи алгоритма**
### **1.1. Рекурсивный перебор с возвратом (Backtracking)**
Алгоритм работает по принципу **"пробуем все варианты, откатываемся при неудаче"**:
1. Конь делает ход.
2. Если дальше путь невозможен — возвращается назад и пробует другой вариант.

### **1.2. Правила ходов коня**
Конь ходит буквой **"Г"**:
- 2 клетки в одном направлении + 1 в перпендикулярном.
- Всего **8 возможных ходов** (если не выходить за границы доски).

### **1.3. Матрица посещений**
- Доска представлена как `board[6][6]`, где:
  - `-1` — клетка ещё не посещена.
  - `0, 1, 2, ..., 35` — порядковый номер хода.

---

## **2. Пошаговый алгоритм**
### **2.1. Проверка безопасного хода (`isSafe`)**
Перед каждым ходом проверяем:
- Не выходит ли конь за границы доски (`0 ≤ x, y < 6`).
- Не посещена ли клетка ранее (`board[x][y] == -1`).

### **2.2. Рекурсивный обход (`knightTour`)**
1. **Базовый случай**:  
   Если `moveCount == 36` (все клетки пройдены) → решение найдено!

2. **Рекурсивный случай**:  
   - Пробуем все **8 возможных ходов** из текущей позиции.
   - Для каждого хода:
     - Помечаем клетку как посещённую (`board[nextX][nextY] = moveCount`).
     - Рекурсивно вызываем `knightTour` для новой позиции.
     - Если рекурсивный вызов вернул `true` → путь найден!
     - Если нет → **откатываемся** (`board[nextX][nextY] = -1`).

3. **Если ни один ход не привёл к решению** → возвращаем `false`.

---

## **3. Визуализация работы**
### **Пример для доски 3×3 (упрощённый случай)**
Пусть конь начинает с `(0, 0)`:
```
1. (0,0) → помечаем 0
2. Пробуем ход (2,1) → помечаем 1
3. Рекурсия: из (2,1) нет допустимых ходов → откат!
4. Пробуем ход (1,2) → помечаем 1
5. Рекурсия: из (1,2) можно в (0,0), но там уже 0 → пробуем другие ходы...
6. Если все варианты исчерпаны → возвращаем false.
```

### **Почему это работает?**
- Алгоритм **систематически перебирает все пути**.
- Если путь заходит в тупик — **откатывается** и пробует другой вариант.
- На доске 6×6 **не для всех начальных позиций есть решение**, поэтому возможен вывод "Маршрут не найден".

---

## **4. Оптимизации (если нужно ускорить)**
1. **Правило Варнсдорфа**:  
   Сначала ходить в клетку с **наименьшим числом дальнейших ходов** (уменьшает число переборов).
2. **Мемоизация**:  
   Запоминать неудачные пути, чтобы не пересчитывать их повторно.
3. **Эвристики**:  
   Разбивать доску на зоны и искать путь по частям.

---

## **Вывод**
Этот алгоритм — **классический пример рекурсии с возвратом**.  
Он гарантированно найдёт решение, если оно существует, но может работать долго на больших досках (из-за экспоненциальной сложности).  

Для доски **6×6** он справляется за разумное время, но **не на всех начальных позициях есть решение**.

Вот основные источники, на которых основан алгоритм обхода шахматной доски конём (Knight's Tour):

---

### **1. Классические алгоритмические источники**
1. **Дональд Кнут** – *"Искусство программирования"* (Том 4)  
   - Рассматривает backtracking и рекурсивные методы перебора.  
   - Анализирует задачу о ходе коня как пример применения этих методов.

2. **Стивен Скиена** – *"Алгоритмы: разработка и применение"*  
   - Описывает алгоритмы поиска с возвратом (backtracking).  
   - Приводит Knight's Tour как классическую задачу на графах.

3. **Томас Кормен и др.** – *"Алгоритмы: построение и анализ"*  
   - Разбирает методы полного перебора и их оптимизацию.  
   - Упоминает задачу о ходе коня в контексте эвристик.

---

### **2. Специализированные материалы по шахматной математике**
4. **Warnsdorff's algorithm** (1823)  
   - Эвристика для ускорения поиска: конь должен идти в клетку с наименьшим числом дальнейших ходов.  
   - Источник: H. C. Warnsdorff, *"Des Rösselsprungs einfachste und allgemeinste Lösung"* (1823).

5. **Работы по гамильтоновым путям**  
   - Knight's Tour — частный случай задачи о нахождении гамильтонова пути на графе.  
   - Ключевые работы:  
     - Pólya, G. (1921). *"Über die Analogie der Kristallsymmetrie in der Ebene"*.  
     - Schwenk, A. (1991). *"Which Rectangular Chessboards Have a Knight’s Tour?"* (доказывает, что для доски 6×6 не все начальные позиции имеют решение).

---

### **3. Реализации и оптимизации**
6. **GeeksforGeeks – Knight's Tour Problem**  
   - [https://www.geeksforgeeks.org/knights-tour-problem/](https://www.geeksforgeeks.org/knights-tour-problem/)  
   - Примеры кода на C++, Python с объяснением backtracking.

7. **Wikipedia – Knight's Tour**  
   - [https://en.wikipedia.org/wiki/Knight%27s_tour](https://en.wikipedia.org/wiki/Knight%27s_tour)  
   - Подробная история, математические основы и варианты алгоритмов.

8. **Rosetta Code**  
   - [https://rosettacode.org/wiki/Knight%27s_tour](https://rosettacode.org/wiki/Knight%27s_tour)  
   - Реализации на разных языках, включая C++.

---

### **4. Дополнительные материалы**
9. **Эвристики и AI**  
   - В современных решениях (например, для досок N×N при N > 8) используют:  
     - Методы Монте-Карло.  
     - Нейронные сети для предсказания удачных ходов.

10. **Книги по олимпиадному программированию**  
    - А. Лааксонен – *"Олимпиадное программирование"*.  
    - Разбирает Knight's Tour как задачу на рекурсию и динамическое программирование.

---

### **Почему доска 6×6 — особый случай?**
- Для чётных досок (кроме некоторых, например, 8×8) **не всегда существует решение**.  
- Это доказано в работах по теории графов (Schwenk, 1991).  
- В программе добавлено предупреждение: *"На доске 6×6 не все начальные позиции имеют решение"*.

---

Если нужно углубиться в математику или оптимизации, могу уточнить детали!
